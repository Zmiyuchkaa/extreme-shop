{"ast":null,"code":"var _jsxFileName = \"/Users/olenarolskaya/FE/extreme-shop/frontend/src/pages/login/index.jsx\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nexport default function LogIn() {\n  let [mail, setMail] = useState('');\n  let [pass, setPass] = useState();\n  let [helperText, setHelperText] = useState('');\n  let [error, setError] = useState(false);\n  const [cookies, setCookie] = useCookies([]);\n  const [toProducts, setToProducts] = useState(false);\n\n  const handleMailInputChange = event => {\n    setMail(event.target.value);\n  };\n\n  const handlePassInputChange = event => {\n    if (event.target.value.length >= 6) {\n      setPass(event.target.value);\n      setHelperText('');\n      setError(false);\n    } else {\n      setHelperText('Неправильный пароль. Требуется минимум 6 символов.');\n      setError(true);\n    }\n  };\n\n  const submitButton = () => {\n    axios.post('http://localhost:3030/authentication', {\n      strategy: 'local',\n      email: mail,\n      password: pass\n    }).then(response => {\n      if (response.status === 201) {\n        setCookie('token', response.data.accessToken, {\n          path: '/'\n        });\n        console.log('redirecting');\n        setTimeout(() => setToProducts(true), 500);\n      }\n    }).catch(error => {\n      alert(`${error.response.data.message}`);\n      let errorText = error;\n      console.log(error.response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 14\n    }\n  }, \"\\u041B\\u043E\\u0433\\u0438\\u043D\")), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter Username\",\n    onChange: handleMailInputChange,\n    autoFocus: true,\n    name: \"login\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 14\n    }\n  }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\")), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handlePassInputChange,\n    error: error,\n    helperText: helperText,\n    type: \"text\",\n    placeholder: \"Enter Username\",\n    onChange: handleMailInputChange,\n    name: \"login\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submitButton,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"), toProducts ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }) : null);\n}","map":{"version":3,"sources":["/Users/olenarolskaya/FE/extreme-shop/frontend/src/pages/login/index.jsx"],"names":["React","useState","Redirect","axios","useCookies","LogIn","mail","setMail","pass","setPass","helperText","setHelperText","error","setError","cookies","setCookie","toProducts","setToProducts","handleMailInputChange","event","target","value","handlePassInputChange","length","submitButton","post","strategy","email","password","then","response","status","data","accessToken","path","console","log","setTimeout","catch","alert","message","errorText"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,cAA3B;AAIA,eAAe,SAASC,KAAT,GAAiB;AAC9B,MAAI,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,EAAD,CAA9B;AACA,MAAI,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,EAA9B;AACA,MAAI,CAACS,UAAD,EAAaC,aAAb,IAA8BV,QAAQ,CAAC,EAAD,CAA1C;AACA,MAAI,CAACW,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACa,OAAD,EAAUC,SAAV,IAAuBX,UAAU,CAAC,EAAD,CAAvC;AACA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8BhB,QAAQ,CAAC,KAAD,CAA5C;;AAEA,QAAMiB,qBAAqB,GAAIC,KAAD,IAAW;AACvCZ,IAAAA,OAAO,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP;AACD,GAFD;;AAIA,QAAMC,qBAAqB,GAAIH,KAAD,IAAW;AACvC,QAAIA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBE,MAAnB,IAA6B,CAAjC,EAAoC;AAClCd,MAAAA,OAAO,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP;AACAV,MAAAA,aAAa,CAAC,EAAD,CAAb;AACAE,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACD,KAJD,MAIO;AACLF,MAAAA,aAAa,CAAC,oDAAD,CAAb;AACAE,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,GATD;;AAWA,QAAMW,YAAY,GAAE,MAAM;AAC1BrB,IAAAA,KAAK,CAACsB,IAAN,CAAW,sCAAX,EAAkD;AAClDC,MAAAA,QAAQ,EAAG,OADuC;AAElDC,MAAAA,KAAK,EAAErB,IAF2C;AAGlDsB,MAAAA,QAAQ,EAAEpB;AAHwC,KAAlD,EAKCqB,IALD,CAKMC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3BhB,QAAAA,SAAS,CAAC,OAAD,EAAUe,QAAQ,CAACE,IAAT,CAAcC,WAAxB,EAAqC;AAAEC,UAAAA,IAAI,EAAE;AAAR,SAArC,CAAT;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAC,QAAAA,UAAU,CAAC,MAAMpB,aAAa,CAAC,IAAD,CAApB,EAA4B,GAA5B,CAAV;AACD;AACF,KAXD,EAYCqB,KAZD,CAYO1B,KAAK,IAAI;AACd2B,MAAAA,KAAK,CAAE,GAAE3B,KAAK,CAACkB,QAAN,CAAeE,IAAf,CAAoBQ,OAAQ,EAAhC,CAAL;AACA,UAAIC,SAAS,GAAG7B,KAAhB;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,KAAK,CAACkB,QAAN,CAAeE,IAAf,CAAoBQ,OAAhC;AACC,KAhBH;AAiBC,GAlBD;;AAoBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAAP,CADF,eAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,gBAFd;AAGE,IAAA,QAAQ,EAAEtB,qBAHZ;AAIE,IAAA,SAAS,MAJX;AAIY,IAAA,IAAI,EAAC,OAJjB;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAP,CATF,eAUE;AACE,IAAA,QAAQ,EAAEI,qBADZ;AAEE,IAAA,KAAK,EAAIV,KAFX;AAGE,IAAA,UAAU,EAAIF,UAHhB;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,WAAW,EAAC,gBALd;AAME,IAAA,QAAQ,EAAEQ,qBANZ;AAOE,IAAA,IAAI,EAAC,OAPP;AAQE,IAAA,QAAQ,MARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,eAoBE;AACE,IAAA,OAAO,EAAEM,YADX;AAEE,IAAA,IAAI,EAAC,QAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCApBF,EA0BGR,UAAU,gBAAG,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAiC,IA1B9C,CADF;AA8BD","sourcesContent":["import React, {useState} from 'react';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\n\n\n\nexport default function LogIn() {\n  let [mail, setMail] = useState('');\n  let [pass, setPass] = useState();\n  let [helperText, setHelperText] = useState('');\n  let [error, setError] = useState(false);\n  const [cookies, setCookie] = useCookies([]);\n  const [toProducts, setToProducts] = useState(false);\n\n  const handleMailInputChange = (event) => {\n    setMail(event.target.value);\n  }\n\n  const handlePassInputChange = (event) => {\n    if (event.target.value.length >= 6) {\n      setPass(event.target.value);\n      setHelperText('');\n      setError(false);\n    } else {\n      setHelperText('Неправильный пароль. Требуется минимум 6 символов.');\n      setError(true);\n    }\n  }\n\n  const submitButton =() => {\n  axios.post('http://localhost:3030/authentication',{\n  strategy : 'local',\n  email: mail,\n  password: pass,\n  })\n  .then(response => {\n    if (response.status === 201) {\n      setCookie('token', response.data.accessToken, { path: '/' });\n      console.log('redirecting')\n      setTimeout(() => setToProducts(true), 500);\n    }\n  })\n  .catch(error => {\n    alert(`${error.response.data.message}`);\n    let errorText = error;\n    console.log(error.response.data.message)\n    })\n  }\n\n  return (\n    <div>\n      <label><b>Логин</b></label>\n      <input \n        type=\"text\" \n        placeholder=\"Enter Username\" \n        onChange={handleMailInputChange} \n        autoFocus name=\"login\" \n        required\n      />\n      <label><b>Пароль</b></label>\n      <input \n        onChange={handlePassInputChange}\n        error = {error}\n        helperText = {helperText} \n        type=\"text\" \n        placeholder=\"Enter Username\" \n        onChange={handleMailInputChange}  \n        name=\"login\" \n        required\n      />\n      <button\n        onClick={submitButton}\n        type=\"submit\"\n      >\n        Войти\n      </button>\n      {toProducts ? <Redirect to=\"/products\" /> : null}\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}