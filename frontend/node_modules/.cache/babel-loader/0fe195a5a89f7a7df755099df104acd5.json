{"ast":null,"code":"var _jsxFileName = \"/Users/olenarolskaya/FE/extreme-shop/frontend/src/pages/login/index.jsx\";\nimport React, { useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nexport default LogIn = () => {\n  let [mail, setMail] = useState('');\n  let [pass, setPass] = useState();\n  let [helperText, setHelperText] = useState('');\n  let [error, setError] = useState(false);\n  const [cookies, setCookie] = useCookies([]);\n  const [toProducts, setToProducts] = useState(false);\n\n  const handleMailInputChange = event => {\n    setMail(event.target.value);\n  };\n\n  const handlePassInputChange = event => {\n    if (event.target.value.length >= 6) {\n      setPass(event.target.value);\n      setHelperText('');\n      setError(false);\n    } else {\n      setHelperText('Неправильный пароль. Требуется минимум 6 символов.');\n      setError(true);\n    }\n  };\n\n  const submitButton = () => {\n    axios.post('http://localhost:3030/authentication', {\n      strategy: 'local',\n      email: mail,\n      password: pass\n    }).then(response => {\n      if (response.status === 201) {\n        setCookie('token', response.data.accessToken, {\n          path: '/'\n        });\n        console.log('redirecting');\n        setTimeout(() => setToProducts(true), 500);\n      }\n    }).catch(error => {\n      alert(`${error.response.data.message}`);\n      let errorText = error;\n      console.log(error.response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.main,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(RouterLink, {\n    to: \"/\",\n    className: classes.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: classes.back,\n    action: /*#__PURE__*/React.createElement(IconButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardMedia, {\n      className: classes.backIcon,\n      component: \"img\",\n      src: Back,\n      title: \"Back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"section\", {\n    className: classes.block,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 15\n    }\n  }, \"Sign in\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    onChange: handleMailInputChange,\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Email Address\",\n    name: \"email\",\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    onChange: handlePassInputChange,\n    error: error,\n    helperText: helperText,\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    id: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: submitButton,\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    className: classes.submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, \"\\u0412\\u043E\\u0439\\u0442\\u0438\"), toProducts ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/messages/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 31\n    }\n  }) : null)))));\n};","map":{"version":3,"sources":["/Users/olenarolskaya/FE/extreme-shop/frontend/src/pages/login/index.jsx"],"names":["React","useState","Link","RouterLink","Redirect","axios","useCookies","LogIn","mail","setMail","pass","setPass","helperText","setHelperText","error","setError","cookies","setCookie","toProducts","setToProducts","handleMailInputChange","event","target","value","handlePassInputChange","length","submitButton","post","strategy","email","password","then","response","status","data","accessToken","path","console","log","setTimeout","catch","alert","message","errorText","classes","main","link","back","backIcon","Back","block","root","paper","avatar","form","submit"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\n\n\n\nexport default LogIn = () => {\n  let [mail, setMail] = useState('');\n  let [pass, setPass] = useState();\n  let [helperText, setHelperText] = useState('');\n  let [error, setError] = useState(false);\n  const [cookies, setCookie] = useCookies([]);\n  const [toProducts, setToProducts] = useState(false);\n\n  const handleMailInputChange = (event) => {\n    setMail(event.target.value);\n  }\n\n  const handlePassInputChange = (event) => {\n    if (event.target.value.length >= 6) {\n      setPass(event.target.value);\n      setHelperText('');\n      setError(false);\n    } else {\n      setHelperText('Неправильный пароль. Требуется минимум 6 символов.');\n      setError(true);\n    }\n  }\n\n  const submitButton =() => {\n  axios.post('http://localhost:3030/authentication',{\n  strategy : 'local',\n  email: mail,\n  password: pass,\n  })\n  .then(response => {\n    if (response.status === 201) {\n      setCookie('token', response.data.accessToken, { path: '/' });\n      console.log('redirecting')\n      setTimeout(() => setToProducts(true), 500);\n    }\n  })\n  .catch(error => {\n    alert(`${error.response.data.message}`);\n    let errorText = error;\n    console.log(error.response.data.message)\n    })\n  }\n\n  return (\n    <div className={classes.main}>\n      <RouterLink to='/' className={classes.link}>\n        <CardHeader className={classes.back}\n          action={\n            <IconButton>\n              <CardMedia className={classes.backIcon} component=\"img\" src={Back} title=\"Back\"/>\n            </IconButton>\n          }/>\n      </RouterLink>\n      <section className={classes.block}>\n        <Container component=\"main\" maxWidth=\"xs\" className={classes.root}>\n          <CssBaseline />\n            <div className={classes.paper}>\n              <Avatar className={classes.avatar}>\n                <LockOutlinedIcon />\n              </Avatar>\n              <Typography component=\"h1\" variant=\"h5\">\n                Sign in\n              </Typography>\n              <div className={classes.form} noValidate>\n                <TextField\n                  onChange={handleMailInputChange}\n                  variant=\"outlined\"\n                  margin=\"normal\"\n                  required\n                  fullWidth\n                  id=\"email\"\n                  label=\"Email Address\"\n                  name=\"email\"\n                  autoFocus\n                />\n                <TextField\n                  onChange={handlePassInputChange}\n                  error = {error}\n                  helperText = {helperText}\n                  variant=\"outlined\"\n                  margin=\"normal\"\n                  required\n                  fullWidth\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  id=\"password\"\n                />\n                <Button\n                  onClick={submitButton}\n                  type=\"submit\"\n                  fullWidth\n                  variant=\"contained\"\n                  className={classes.submit}\n                >\n                  Войти\n                </Button>\n                {toProducts ? <Redirect to=\"/messages/\" /> : null}\n              </div>\n            </div>\n        </Container>\n      </section>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}